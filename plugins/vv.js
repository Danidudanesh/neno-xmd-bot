'use strict';const _0x529009=_0x1721;(function(_0x438426,_0x578fbc){const _0x174ad5=_0x1721,_0x1e6844=_0x438426();while(!![]){try{const _0x508885=parseInt(_0x174ad5(0x19a))/0x1*(-parseInt(_0x174ad5(0x1a7))/0x2)+-parseInt(_0x174ad5(0x19b))/0x3*(parseInt(_0x174ad5(0x19c))/0x4)+-parseInt(_0x174ad5(0x19e))/0x5+-parseInt(_0x174ad5(0x17e))/0x6*(parseInt(_0x174ad5(0x19f))/0x7)+parseInt(_0x174ad5(0x15a))/0x8+-parseInt(_0x174ad5(0x161))/0x9+-parseInt(_0x174ad5(0x18f))/0xa*(-parseInt(_0x174ad5(0x194))/0xb);if(_0x508885===_0x578fbc)break;else _0x1e6844['push'](_0x1e6844['shift']());}catch(_0x13b457){_0x1e6844['push'](_0x1e6844['shift']());}}}(_0x1e84,0x871f6));const {cmd}=require(_0x529009(0x18d)),fs=require('fs'),path=require(_0x529009(0x16e)),DOWNLOAD_DIR=path[_0x529009(0x1a1)](__dirname,'..',_0x529009(0x155)),META_FILE=path[_0x529009(0x1a1)](DOWNLOAD_DIR,_0x529009(0x168));if(!fs['existsSync'](DOWNLOAD_DIR))fs[_0x529009(0x17d)](DOWNLOAD_DIR,{'recursive':!![]});function _0x1e84(){const _0x3b202f=['\x20(view-once)','startsWith','ephemeralMessage','❌\x20Saved\x20locally\x20but\x20failed\x20to\x20resend.\x20Check\x20bot\x20logs.','image','imageMessage','videoMessage','document','downloadContentFromMessage','constructor','main','sendMessage','concat','mkdirSync','1475154ZKJBIV','toString','toISOString','url','remoteJid','MessageMedia','quoted','Client','name','whatsapp-web.js','Error\x20in\x20.vv\x20plugin:','function','png','hasMedia','bin','../command','hex','10qGtBqr','Unlock\x20&\x20save\x20View-Once\x20image/video\x20(reply\x20to\x20view-once)','replace','buffer','existsSync','34493910MOxUhf','key','documentMessage','message','47494638','whatsapp-web.js\x20send\x20failed,\x20falling\x20back:','1xqWPaY','106047xYDODj','68OZOsqI','❌\x20Failed\x20to\x20download\x20media.\x20The\x20library\x20may\x20not\x20expose\x20view-once\x20content,\x20or\x20the\x20message\x20expired.','4287160gtVHPe','7nGdgZD','video/','join','application/octet-stream','ftyp','❌\x20Could\x20not\x20unlock/save\x20this\x20view-once\x20media.\x20See\x20logs.','split','warn','1620506VhwjYA','gif','stream','viewOnceMessage','\x0aFile:\x20','video','downloaded_media','ascii','jpeg','Resend\x20failed\x20after\x20fallbacks:','mp4','3104152pvjotf','base64','@adiwajshing/baileys','data','ffd8ff','push','downloadMedia','4103010qViGpF','fetch','image/','_viewonce','stringify','mimetype','jpg','media_metadata.json','slice','writeFileSync','89504e47','participant','type','path','arrayBuffer'];_0x1e84=function(){return _0x3b202f;};return _0x1e84();}function _0x1721(_0x4a1c44,_0xc1f08d){const _0x1e8408=_0x1e84();return _0x1721=function(_0x172132,_0x187a62){_0x172132=_0x172132-0x155;let _0x1d4072=_0x1e8408[_0x172132];return _0x1d4072;},_0x1721(_0x4a1c44,_0xc1f08d);}let baileysDownloadFn=null;try{const baileys=require(_0x529009(0x15c));baileysDownloadFn=baileys[_0x529009(0x178)];}catch(_0x472851){}let WWebJS=null;try{WWebJS=require(_0x529009(0x187));}catch(_0x4f8cff){WWebJS=null;}function saveMetadata(_0x16585f){const _0x5036b8=_0x529009;let _0x174a84=[];try{if(fs[_0x5036b8(0x193)](META_FILE))_0x174a84=JSON['parse'](fs['readFileSync'](META_FILE,'utf8')||'[]');}catch(_0x58cdad){}_0x174a84[_0x5036b8(0x15f)](_0x16585f),fs[_0x5036b8(0x16a)](META_FILE,JSON[_0x5036b8(0x165)](_0x174a84,null,0x2));}async function streamToBuffer(_0x2913ab){const _0x245314=_0x529009,_0x25fa47=[];for await(const _0x417975 of _0x2913ab)_0x25fa47['push'](_0x417975);return Buffer[_0x245314(0x17c)](_0x25fa47);}async function downloadQuotedMedia(_0x17009d,_0x5720df){const _0x476d12=_0x529009;try{if(typeof _0x5720df['downloadMedia']===_0x476d12(0x189)){const _0x544a00=await _0x5720df[_0x476d12(0x160)]();if(_0x544a00&&_0x544a00[_0x476d12(0x15d)])return{'buffer':Buffer['from'](_0x544a00['data'],_0x476d12(0x15b)),'mimetype':_0x544a00[_0x476d12(0x166)]||_0x5720df[_0x476d12(0x166)]||null};}}catch(_0x369a2f){}try{if(typeof _0x5720df['download']===_0x476d12(0x189)){const _0xcd2b35=await _0x5720df['download']();if(_0xcd2b35&&Buffer['isBuffer'](_0xcd2b35))return{'buffer':_0xcd2b35,'mimetype':_0x5720df[_0x476d12(0x166)]||null};}}catch(_0x11c1cb){}try{const _0x76bd82=_0x5720df[_0x476d12(0x197)]||_0x5720df;let _0x5403ae=null;if(_0x76bd82[_0x476d12(0x1aa)])_0x5403ae=_0x76bd82[_0x476d12(0x1aa)][_0x476d12(0x197)]||_0x76bd82[_0x476d12(0x1aa)];else{if(_0x76bd82[_0x476d12(0x172)]&&_0x76bd82['ephemeralMessage'][_0x476d12(0x197)]){_0x5403ae=_0x76bd82[_0x476d12(0x172)][_0x476d12(0x197)];if(_0x5403ae[_0x476d12(0x1aa)])_0x5403ae=_0x5403ae[_0x476d12(0x1aa)]['message']||_0x5403ae['viewOnceMessage'];}else _0x5403ae=_0x76bd82;}const _0x418e27=_0x5403ae&&(_0x5403ae[_0x476d12(0x175)]||_0x5403ae[_0x476d12(0x176)]||_0x5403ae[_0x476d12(0x196)]||_0x5403ae['stickerMessage']||null);if(_0x418e27){const _0x336858=_0x418e27[_0x476d12(0x166)]||_0x418e27['m']||_0x418e27[_0x476d12(0x16d)]||null;if(typeof _0x17009d['downloadContentFromMessage']===_0x476d12(0x189))try{const _0x2c6eea=_0x5403ae['imageMessage']?_0x476d12(0x174):_0x5403ae[_0x476d12(0x176)]?_0x476d12(0x1ac):_0x5403ae[_0x476d12(0x196)]?_0x476d12(0x177):_0x476d12(0x1a9),_0x1738a2=await _0x17009d[_0x476d12(0x178)](_0x418e27,_0x2c6eea),_0x1d0c29=await streamToBuffer(_0x1738a2);if(_0x1d0c29)return{'buffer':_0x1d0c29,'mimetype':_0x336858||null};}catch(_0x4b9ff7){}if(baileysDownloadFn)try{const _0x51c5ee=_0x5403ae['imageMessage']?_0x476d12(0x174):_0x5403ae['videoMessage']?'video':_0x5403ae[_0x476d12(0x196)]?_0x476d12(0x177):_0x476d12(0x1a9),_0x3a91f6=await baileysDownloadFn(_0x418e27,_0x51c5ee),_0x3e4c06=await streamToBuffer(_0x3a91f6);if(_0x3e4c06)return{'buffer':_0x3e4c06,'mimetype':_0x336858||null};}catch(_0x3a58cb){}if(_0x418e27[_0x476d12(0x181)])try{const _0x4f15d8=_0x17009d[_0x476d12(0x162)]||global[_0x476d12(0x162)];if(_0x4f15d8){const _0x185b13=await _0x4f15d8(_0x418e27[_0x476d12(0x181)]),_0x260116=await _0x185b13[_0x476d12(0x16f)]();return{'buffer':Buffer['from'](_0x260116),'mimetype':_0x336858||_0x185b13['headers']['get']('content-type')||null};}}catch(_0x511aec){}}}catch(_0x2db61c){}try{if(_0x5720df[_0x476d12(0x18b)]===!![]&&typeof _0x5720df['downloadMedia']===_0x476d12(0x189)){const _0x212760=await _0x5720df['downloadMedia']();if(_0x212760&&_0x212760[_0x476d12(0x15d)])return{'buffer':Buffer['from'](_0x212760[_0x476d12(0x15d)],_0x476d12(0x15b)),'mimetype':_0x212760[_0x476d12(0x166)]||null};}}catch(_0xbb57a9){}return null;}function detectExtensionFromBuffer(_0x298f2c,_0x320f9f){const _0x312ce2=_0x529009;if(_0x320f9f){const _0x3b994f=_0x320f9f[_0x312ce2(0x1a5)]('/');if(_0x3b994f[0x1])return _0x3b994f[0x1][_0x312ce2(0x1a5)](';')[0x0][_0x312ce2(0x1a5)]('+')[0x0];}try{const _0x4e2e8b=_0x298f2c[_0x312ce2(0x169)](0x0,0xc),_0x12f4e3=_0x4e2e8b[_0x312ce2(0x17f)](_0x312ce2(0x18e));if(_0x12f4e3['startsWith'](_0x312ce2(0x15e)))return'jpg';if(_0x12f4e3['startsWith'](_0x312ce2(0x16b)))return _0x312ce2(0x18a);if(_0x298f2c[_0x312ce2(0x169)](0x4,0x8)[_0x312ce2(0x17f)](_0x312ce2(0x156))===_0x312ce2(0x1a3))return _0x312ce2(0x159);if(_0x12f4e3[_0x312ce2(0x171)](_0x312ce2(0x198)))return _0x312ce2(0x1a8);}catch(_0x54cd2f){}return _0x312ce2(0x18c);}cmd({'pattern':'vv','react':'📸','desc':_0x529009(0x190),'category':_0x529009(0x17a),'filename':__filename,'fromMe':![]},async(_0x2f9124,_0x345141,_0x401267,{reply:_0x18d44c})=>{const _0x5e63fa=_0x529009;try{const _0x131d0c=_0x345141[_0x5e63fa(0x195)][_0x5e63fa(0x182)];if(!_0x401267['quoted'])return _0x18d44c('❌\x20Please\x20reply\x20to\x20a\x20*View\x20Once*\x20image\x20or\x20video\x20using\x20.vv');const _0x121330=await downloadQuotedMedia(_0x2f9124,_0x401267[_0x5e63fa(0x184)]);if(!_0x121330||!_0x121330[_0x5e63fa(0x192)])return _0x18d44c(_0x5e63fa(0x19d));const _0x4a84f5=_0x121330[_0x5e63fa(0x192)],_0x571e19=(_0x121330['mimetype']||'')[_0x5e63fa(0x17f)](),_0x2f28ad=detectExtensionFromBuffer(_0x4a84f5,_0x571e19),_0x16735c=_0x345141[_0x5e63fa(0x195)][_0x5e63fa(0x16c)]||_0x345141[_0x5e63fa(0x195)][_0x5e63fa(0x182)]||'unknown',_0x9eab48=String(_0x16735c)[_0x5e63fa(0x191)](/[^0-9a-zA-Z_.-]/g,'_'),_0x5e17f9=Date['now'](),_0x3f96a6=((()=>{const _0x79f306=_0x5e63fa;try{const _0x6b0dec=_0x401267['quoted'][_0x79f306(0x197)]||_0x401267[_0x79f306(0x184)];return!!(_0x6b0dec&&(_0x6b0dec[_0x79f306(0x1aa)]||_0x6b0dec[_0x79f306(0x172)]&&_0x6b0dec['ephemeralMessage'][_0x79f306(0x197)]&&_0x6b0dec[_0x79f306(0x172)][_0x79f306(0x197)]['viewOnceMessage']));}catch(_0x32fd39){return![];}})()),_0x49612b=_0x3f96a6?_0x5e63fa(0x164):'',_0x10b557=_0x9eab48+'_'+_0x5e17f9+_0x49612b+'.'+_0x2f28ad,_0x29dfb0=path[_0x5e63fa(0x1a1)](DOWNLOAD_DIR,_0x10b557);fs[_0x5e63fa(0x16a)](_0x29dfb0,_0x4a84f5);const _0x21050f={'saved_at':new Date()[_0x5e63fa(0x180)](),'chat':_0x131d0c,'from':_0x16735c,'message_id':_0x345141[_0x5e63fa(0x195)]['id']||null,'filename':_0x10b557,'path':_0x29dfb0,'mimetype':_0x571e19||null,'viewOnce':!!_0x3f96a6,'quoted_key':_0x401267[_0x5e63fa(0x184)]&&_0x401267[_0x5e63fa(0x184)][_0x5e63fa(0x195)]?_0x401267[_0x5e63fa(0x184)]['key']:null};saveMetadata(_0x21050f);const _0x15bac7='🔓\x20Unlocked\x20&\x20saved'+(_0x3f96a6?_0x5e63fa(0x170):'')+_0x5e63fa(0x1ab)+_0x10b557,_0x356337={'quoted':_0x345141};try{if(WWebJS&&_0x2f9124&&_0x2f9124['constructor']&&(_0x2f9124['constructor'][_0x5e63fa(0x186)]===_0x5e63fa(0x185)||_0x2f9124[_0x5e63fa(0x179)][_0x5e63fa(0x186)]==='WhatsAppWebClient'))try{const _0x14666b=WWebJS[_0x5e63fa(0x183)],_0x119822=_0x4a84f5['toString'](_0x5e63fa(0x15b)),_0x59a1e8=new _0x14666b(_0x571e19||_0x5e63fa(0x1a2),_0x119822,_0x10b557);await _0x2f9124[_0x5e63fa(0x17b)](_0x131d0c,_0x59a1e8,{'caption':_0x15bac7});return;}catch(_0x4bb1cf){console[_0x5e63fa(0x1a6)](_0x5e63fa(0x199),_0x4bb1cf&&_0x4bb1cf[_0x5e63fa(0x197)]?_0x4bb1cf[_0x5e63fa(0x197)]:_0x4bb1cf);}if(_0x571e19&&_0x571e19[_0x5e63fa(0x171)](_0x5e63fa(0x163)))await _0x2f9124['sendMessage'](_0x131d0c,{'image':_0x4a84f5,'caption':_0x15bac7},_0x356337);else{if(_0x571e19&&_0x571e19[_0x5e63fa(0x171)](_0x5e63fa(0x1a0)))await _0x2f9124['sendMessage'](_0x131d0c,{'video':_0x4a84f5,'caption':_0x15bac7},_0x356337);else{if(_0x2f28ad===_0x5e63fa(0x18a)||_0x2f28ad===_0x5e63fa(0x167)||_0x2f28ad===_0x5e63fa(0x157)||_0x2f28ad==='gif')await _0x2f9124[_0x5e63fa(0x17b)](_0x131d0c,{'image':_0x4a84f5,'caption':_0x15bac7},_0x356337);else _0x2f28ad===_0x5e63fa(0x159)?await _0x2f9124[_0x5e63fa(0x17b)](_0x131d0c,{'video':_0x4a84f5,'caption':_0x15bac7},_0x356337):await _0x2f9124[_0x5e63fa(0x17b)](_0x131d0c,{'document':_0x4a84f5,'mimetype':_0x571e19||'application/octet-stream','fileName':_0x10b557,'caption':_0x15bac7},_0x356337);}}}catch(_0xa88899){try{if(_0x571e19&&_0x571e19[_0x5e63fa(0x171)](_0x5e63fa(0x163)))await _0x2f9124['sendMessage'](_0x131d0c,{'image':{'data':_0x4a84f5},'caption':_0x15bac7},_0x356337);else _0x571e19&&_0x571e19[_0x5e63fa(0x171)]('video/')?await _0x2f9124['sendMessage'](_0x131d0c,{'video':{'data':_0x4a84f5},'caption':_0x15bac7},_0x356337):await _0x2f9124[_0x5e63fa(0x17b)](_0x131d0c,{'document':{'data':_0x4a84f5},'mimetype':_0x571e19||_0x5e63fa(0x1a2),'fileName':_0x10b557,'caption':_0x15bac7},_0x356337);}catch(_0x5f002f){return console['error'](_0x5e63fa(0x158),_0x5f002f),_0x18d44c(_0x5e63fa(0x173));}}}catch(_0x22552c){console['error'](_0x5e63fa(0x188),_0x22552c);try{_0x18d44c(_0x5e63fa(0x1a4));}catch(_0x36c5a9){}}});
